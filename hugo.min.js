var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(l){this.reject_(l);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(k){c.reject(k)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(n){f(n)}}:
b}var d,f,g=new e(function(a,b){d=a;f=b});this.callWhenSettled_(c(a,d),c(b,f));return g};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,
d){for(var e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())c(f.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function f(b){return function(c){g[b]=c;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,c(d.value).callWhenSettled_(f(g.length-1),e),d=b.next();while(!d.done)})};return e},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6","es3");var Module="undefined"!==typeof Module?Module:{},MAP_NUMBER=Math.round(Math.random()),playing=!1,gameTimer,gameTicks=0,keyboard_left_pressed=!1,keyboard_right_pressed=!1,keyboard_f1_pressed=!1;function doGameTick(){0==gameTicks&&Module._train_init(MAP_NUMBER);Module._train_update();gameTicks+=1}
function resumeGame(){gameTicks=0;gameTimer=setInterval(doGameTick,50);playing=!0}function pauseGame(){clearInterval(gameTimer);playing=!1}Module.print=function(a){console.log(a)};Module.setStatus=function(a){console.log("status="+a)};Module.onRuntimeInitialized=function(){resumeGame()};Module.toggleGame=function(){playing?pauseGame():resumeGame();return playing};Module.togglePalette=function(){keyboard_f1_pressed=!0};
Module.onKeyDown=function(a){if("ArrowLeft"==a.code||"Digit4"==a.code)keyboard_left_pressed=!0;else if("ArrowRight"==a.code||"Digit6"==a.code)keyboard_right_pressed=!0;else if("KeyV"==a.code||"KeyE"==a.code)keyboard_f1_pressed=!0};Module.onMouseDown=function(a){var b=document.getElementById("canvas").getBoundingClientRect(),c=a.clientX-b.left;a=a.clientY-b.top;-51<=a&&164>=a&&(0<=c&&128>=c&&(keyboard_left_pressed=!0),128<=c&&256>=c&&(keyboard_right_pressed=!0))};var moduleOverrides={},key;
for(key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);Module.arguments=[];Module.thisProgram="./this.program";Module.quit=function(a,b){throw b;};Module.preRun=[];Module.postRun=[];var ENVIRONMENT_IS_WEB=!0,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,scriptDirectory="";function locateFile(a){return Module.locateFile?Module.locateFile(a,scriptDirectory):scriptDirectory+a}
if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1):"",Module.read=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.send(null);return b.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType=
"arraybuffer";b.send(null);return new Uint8Array(b.response)}),Module.readAsync=function(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){200==d.status||0==d.status&&d.response?b(d.response):c()};d.onerror=c;d.send(null)},Module.setWindowTitle=function(a){document.title=a};
var out=Module.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),err=Module.printErr||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||out);for(key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var STACK_ALIGN=16;function staticAlloc(a){var b=STATICTOP;STATICTOP=STATICTOP+a+15&-16;return b}
function alignMemory(a,b){b||(b=STACK_ALIGN);return Math.ceil(a/b)*b}var asm2wasmImports={"f64-rem":function(a,b){return a%b},"debugger":function(){debugger}},functionPointers=[],GLOBAL_BASE=1024,ABORT=!1,EXITSTATUS=0;function assert(a,b){a||abort("Assertion failed: "+b)}
function Pointer_stringify(a,b){if(0===b||!a)return"";for(var c=0,d,e=0;;){d=HEAPU8[a+e>>0];c|=d;if(0==d&&!b)break;e++;if(b&&e==b)break}b||(b=e);d="";if(128>c){for(;0<b;)c=String.fromCharCode.apply(String,HEAPU8.subarray(a,a+Math.min(b,1024))),d=d?d+c:c,a+=1024,b-=1024;return d}return UTF8ToString(a)}var UTF8Decoder="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;
function UTF8ArrayToString(a,b){for(var c=b;a[c];)++c;if(16<c-b&&a.subarray&&UTF8Decoder)return UTF8Decoder.decode(a.subarray(b,c));for(c="";;){var d=a[b++];if(!d)return c;if(d&128){var e=a[b++]&63;if(192==(d&224))c+=String.fromCharCode((d&31)<<6|e);else{var f=a[b++]&63;if(224==(d&240))d=(d&15)<<12|e<<6|f;else{var g=a[b++]&63;if(240==(d&248))d=(d&7)<<18|e<<12|f<<6|g;else{var h=a[b++]&63;if(248==(d&252))d=(d&3)<<24|e<<18|f<<12|g<<6|h;else{var l=a[b++]&63;d=(d&1)<<30|e<<24|f<<18|g<<12|h<<6|l}}}65536>
d?c+=String.fromCharCode(d):(d-=65536,c+=String.fromCharCode(55296|d>>10,56320|d&1023))}}else c+=String.fromCharCode(d)}}function UTF8ToString(a){return UTF8ArrayToString(HEAPU8,a)}
function stringToUTF8Array(a,b,c,d){if(!(0<d))return 0;var e=c;d=c+d-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(55296<=g&&57343>=g){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}if(127>=g){if(c>=d)break;b[c++]=g}else{if(2047>=g){if(c+1>=d)break;b[c++]=192|g>>6}else{if(65535>=g){if(c+2>=d)break;b[c++]=224|g>>12}else{if(2097151>=g){if(c+3>=d)break;b[c++]=240|g>>18}else{if(67108863>=g){if(c+4>=d)break;b[c++]=248|g>>24}else{if(c+5>=d)break;b[c++]=252|g>>30;b[c++]=128|g>>24&63}b[c++]=
128|g>>18&63}b[c++]=128|g>>12&63}b[c++]=128|g>>6&63}b[c++]=128|g&63}}b[c]=0;return c-e}function stringToUTF8(a,b,c){return stringToUTF8Array(a,HEAPU8,b,c)}function lengthBytesUTF8(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);127>=d?++b:b=2047>=d?b+2:65535>=d?b+3:2097151>=d?b+4:67108863>=d?b+5:b+6}return b}var UTF16Decoder="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;
function demangle(a){return a}function demangleAll(a){return a.replace(/__Z[\w\d_]+/g,function(a){var b=demangle(a);return a===b?a:b+" ["+a+"]"})}function jsStackTrace(){var a=Error();if(!a.stack){try{throw Error(0);}catch(b){a=b}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}function stackTrace(){var a=jsStackTrace();Module.extraStackTrace&&(a+="\n"+Module.extraStackTrace());return demangleAll(a)}var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216;
function alignUp(a,b){0<a%b&&(a+=b-a%b);return a}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(a){Module.buffer=buffer=a}
function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer);Module.HEAP16=HEAP16=new Int16Array(buffer);Module.HEAP32=HEAP32=new Int32Array(buffer);Module.HEAPU8=HEAPU8=new Uint8Array(buffer);Module.HEAPU16=HEAPU16=new Uint16Array(buffer);Module.HEAPU32=HEAPU32=new Uint32Array(buffer);Module.HEAPF32=HEAPF32=new Float32Array(buffer);Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;
STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0;staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}
function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&err("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")");
Module.buffer?buffer=Module.buffer:("object"===typeof WebAssembly&&"function"===typeof WebAssembly.Memory?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE,maximum:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),Module.buffer=buffer);updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}
function callRuntimeCallbacks(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b();else{var c=b.func;"number"===typeof c?void 0===b.arg?Module.dynCall_v(c):Module.dynCall_vi(c,b.arg):c(void 0===b.arg?null:b.arg)}}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;
function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__);runtimeExited=!0}
function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(a){__ATPRERUN__.unshift(a)}function addOnPostRun(a){__ATPOSTRUN__.unshift(a)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(a){return a}
function addRunDependency(a){runDependencies++;Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(a){runDependencies--;Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies);0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled&&(a=dependenciesFulfilled,dependenciesFulfilled=null,a()))}Module.preloadedImages={};Module.preloadedAudios={};
var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(a){return String.prototype.startsWith?a.startsWith(dataURIPrefix):0===a.indexOf(dataURIPrefix)}
function integrateWasmJS(){function a(){try{if(Module.wasmBinary)return new Uint8Array(Module.wasmBinary);if(Module.readBinary)return Module.readBinary(e);throw"both async and sync fetching of the wasm failed";}catch(m){abort(m)}}function b(){return Module.wasmBinary||!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER||"function"!==typeof fetch?new Promise(function(b,c){b(a())}):fetch(e,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+e+"'";return a.arrayBuffer()}).catch(function(){return a()})}
function c(a,c,d){function f(a,b){h=a.exports;h.memory&&(a=h.memory,b=Module.buffer,a.byteLength<b.byteLength&&err("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),b=new Int8Array(b),(new Int8Array(a)).set(b),updateGlobalBuffer(a),updateGlobalBufferViews());Module.asm=h;Module.usingWasm=!0;removeRunDependency("wasm-instantiate")}function m(a){f(a.instance,a.module)}function k(a){b().then(function(a){return WebAssembly.instantiate(a,g)}).then(a,
function(a){err("failed to asynchronously prepare wasm: "+a);abort(a)})}if("object"!==typeof WebAssembly)return err("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return err("no native wasm Memory in use"),!1;c.memory=Module.wasmMemory;g.global={NaN:NaN,Infinity:Infinity};g["global.Math"]=Math;g.env=c;addRunDependency("wasm-instantiate");if(Module.instantiateWasm)try{return Module.instantiateWasm(g,f)}catch(r){return err("Module.instantiateWasm callback failed with error: "+
r),!1}Module.wasmBinary||"function"!==typeof WebAssembly.instantiateStreaming||isDataURI(e)||"function"!==typeof fetch?k(m):WebAssembly.instantiateStreaming(fetch(e,{credentials:"same-origin"}),g).then(m,function(a){err("wasm streaming compile failed: "+a);err("falling back to ArrayBuffer instantiation");k(m)});return{}}var d="hugo.wast",e="hugo.wasm",f="hugo.temp.asm.js";isDataURI(d)||(d=locateFile(d));isDataURI(e)||(e=locateFile(e));isDataURI(f)||(f=locateFile(f));var g={global:null,env:null,asm2wasm:asm2wasmImports,
parent:Module},h=null;Module.asmPreload=Module.asm;var l=Module.reallocBuffer;Module.reallocBuffer=function(a){if("asmjs"===k)var b=l(a);else a:{a=alignUp(a,Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE);var c=Module.buffer.byteLength;if(Module.usingWasm)try{b=-1!==Module.wasmMemory.grow((a-c)/65536)?Module.buffer=Module.wasmMemory.buffer:null;break a}catch(t){b=null;break a}b=void 0}return b};var k="";Module.asm=function(a,b,d){if(!b.table){var e=Module.wasmTableSize;void 0===e&&(e=1024);var f=
Module.wasmMaxTableSize;b.table="object"===typeof WebAssembly&&"function"===typeof WebAssembly.Table?void 0!==f?new WebAssembly.Table({initial:e,maximum:f,element:"anyfunc"}):new WebAssembly.Table({initial:e,element:"anyfunc"}):Array(e);Module.wasmTable=b.table}b.memoryBase||(b.memoryBase=Module.STATIC_BASE);b.tableBase||(b.tableBase=0);a=c(a,b,d);assert(a,"no binaryen method succeeded.");return a}}integrateWasmJS();STATIC_BASE=GLOBAL_BASE;STATICTOP=STATIC_BASE+1868800;__ATINIT__.push();
var STATIC_BUMP=1868800;Module.STATIC_BASE=STATIC_BASE;Module.STATIC_BUMP=STATIC_BUMP;STATICTOP+=16;function ___lock(){}
var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,
ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,
ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86},ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",
5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",
28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",
47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",
68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",
84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",
102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",
130:"Previous owner died",131:"State not recoverable"};function ___setErrNo(a){Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=a);return a}
var PATH={splitPath:function(a){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1)},normalizeArray:function(a,b){for(var c=0,d=a.length-1;0<=d;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b="/"===a.charAt(0),c="/"===a.substr(-1);(a=PATH.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/"))||b||(a=".");a&&c&&(a+="/");return(b?"/":"")+
a},dirname:function(a){var b=PATH.splitPath(a);a=b[0];b=b[1];if(!a&&!b)return".";b&&(b=b.substr(0,b.length-1));return a+b},basename:function(a){if("/"===a)return"/";var b=a.lastIndexOf("/");return-1===b?a:a.substr(b+1)},extname:function(a){return PATH.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return PATH.normalize(a.join("/"))},join2:function(a,b){return PATH.normalize(a+"/"+b)},resolve:function(){for(var a="",b=!1,c=arguments.length-1;-1<=c&&!b;c--){b=0<=c?arguments[c]:
FS.cwd();if("string"!==typeof b)throw new TypeError("Arguments to path.resolve must be strings");if(!b)return"";a=b+"/"+a;b="/"===b.charAt(0)}a=PATH.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."},relative:function(a,b){function c(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;0<=c&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=PATH.resolve(a).substr(1);b=PATH.resolve(b).substr(1);a=c(a.split("/"));b=c(b.split("/"));for(var d=Math.min(a.length,
b.length),e=d,f=0;f<d;f++)if(a[f]!==b[f]){e=f;break}d=[];for(f=e;f<a.length;f++)d.push("..");d=d.concat(b.slice(e));return d.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(a,b){TTY.ttys[a]={input:[],output:[],ops:b};FS.registerDevice(a,TTY.stream_ops)},stream_ops:{open:function(a){var b=TTY.ttys[a.node.rdev];if(!b)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);a.tty=b;a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},
read:function(a,b,c,d,e){if(!a.tty||!a.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var f=e=0;f<d;f++){try{var g=a.tty.ops.get_char(a.tty)}catch(h){throw new FS.ErrnoError(ERRNO_CODES.EIO);}if(void 0===g&&0===e)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===g||void 0===g)break;e++;b[c+f]=g}e&&(a.node.timestamp=Date.now());return e},write:function(a,b,c,d,e){if(!a.tty||!a.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(e=0;e<d;e++)try{a.tty.ops.put_char(a.tty,
b[c+e])}catch(f){throw new FS.ErrnoError(ERRNO_CODES.EIO);}d&&(a.node.timestamp=Date.now());return e}},default_tty_ops:{get_char:function(a){if(!a.input.length){var b=null;if(ENVIRONMENT_IS_NODE){b=new Buffer(256);var c=0,d=process.stdin.fd;if("win32"!=process.platform){var e=!1;try{d=fs.openSync("/dev/stdin","r"),e=!0}catch(f){}}try{c=fs.readSync(d,b,0,256,null)}catch(f){if(-1!=f.toString().indexOf("EOF"))c=0;else throw f;}e&&fs.closeSync(d);b=0<c?b.slice(0,c).toString("utf-8"):null}else"undefined"!=
typeof window&&"function"==typeof window.prompt?(b=window.prompt("Input: "),null!==b&&(b+="\n")):"function"==typeof readline&&(b=readline(),null!==b&&(b+="\n"));if(!b)return null;a.input=intArrayFromString(b,!0)}return a.input.shift()},put_char:function(a,b){null===b||10===b?(out(UTF8ArrayToString(a.output,0)),a.output=[]):0!=b&&a.output.push(b)},flush:function(a){a.output&&0<a.output.length&&(out(UTF8ArrayToString(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(a,b){null===b||10===
b?(err(UTF8ArrayToString(a.output,0)),a.output=[]):0!=b&&a.output.push(b)},flush:function(a){a.output&&0<a.output.length&&(err(UTF8ArrayToString(a.output,0)),a.output=[])}}},MEMFS={ops_table:null,mount:function(a){return MEMFS.createNode(null,"/",16895,0)},createNode:function(a,b,c,d){if(FS.isBlkdev(c)||FS.isFIFO(c))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,
rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,
readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});c=FS.createNode(a,b,c,d);FS.isDir(c.mode)?(c.node_ops=MEMFS.ops_table.dir.node,c.stream_ops=MEMFS.ops_table.dir.stream,c.contents={}):FS.isFile(c.mode)?(c.node_ops=MEMFS.ops_table.file.node,c.stream_ops=MEMFS.ops_table.file.stream,c.usedBytes=0,c.contents=null):FS.isLink(c.mode)?(c.node_ops=MEMFS.ops_table.link.node,c.stream_ops=MEMFS.ops_table.link.stream):
FS.isChrdev(c.mode)&&(c.node_ops=MEMFS.ops_table.chrdev.node,c.stream_ops=MEMFS.ops_table.chrdev.stream);c.timestamp=Date.now();a&&(a.contents[b]=c);return c},getFileDataAsRegularArray:function(a){if(a.contents&&a.contents.subarray){for(var b=[],c=0;c<a.usedBytes;++c)b.push(a.contents[c]);return b}return a.contents},getFileDataAsTypedArray:function(a){return a.contents?a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents):new Uint8Array},expandFileStorage:function(a,b){a.contents&&
a.contents.subarray&&b>a.contents.length&&(a.contents=MEMFS.getFileDataAsRegularArray(a),a.usedBytes=a.contents.length);if(!a.contents||a.contents.subarray){var c=a.contents?a.contents.length:0;c>=b||(b=Math.max(b,c*(1048576>c?2:1.125)|0),0!=c&&(b=Math.max(b,256)),c=a.contents,a.contents=new Uint8Array(b),0<a.usedBytes&&a.contents.set(c.subarray(0,a.usedBytes),0))}else for(!a.contents&&0<b&&(a.contents=[]);a.contents.length<b;)a.contents.push(0)},resizeFileStorage:function(a,b){if(a.usedBytes!=b)if(0==
b)a.contents=null,a.usedBytes=0;else{if(!a.contents||a.contents.subarray){var c=a.contents;a.contents=new Uint8Array(new ArrayBuffer(b));c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes)))}else if(a.contents||(a.contents=[]),a.contents.length>b)a.contents.length=b;else for(;a.contents.length<b;)a.contents.push(0);a.usedBytes=b}},node_ops:{getattr:function(a){var b={};b.dev=FS.isChrdev(a.mode)?a.id:1;b.ino=a.id;b.mode=a.mode;b.nlink=1;b.uid=0;b.gid=0;b.rdev=a.rdev;FS.isDir(a.mode)?b.size=4096:
FS.isFile(a.mode)?b.size=a.usedBytes:FS.isLink(a.mode)?b.size=a.link.length:b.size=0;b.atime=new Date(a.timestamp);b.mtime=new Date(a.timestamp);b.ctime=new Date(a.timestamp);b.blksize=4096;b.blocks=Math.ceil(b.size/b.blksize);return b},setattr:function(a,b){void 0!==b.mode&&(a.mode=b.mode);void 0!==b.timestamp&&(a.timestamp=b.timestamp);void 0!==b.size&&MEMFS.resizeFileStorage(a,b.size)},lookup:function(a,b){throw FS.genericErrors[ERRNO_CODES.ENOENT];},mknod:function(a,b,c,d){return MEMFS.createNode(a,
b,c,d)},rename:function(a,b,c){if(FS.isDir(a.mode)){try{var d=FS.lookupNode(b,c)}catch(f){}if(d)for(var e in d.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);}delete a.parent.contents[a.name];a.name=c;b.contents[c]=a;a.parent=b},unlink:function(a,b){delete a.contents[b]},rmdir:function(a,b){var c=FS.lookupNode(a,b),d;for(d in c.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete a.contents[b]},readdir:function(a){var b=[".",".."],c;for(c in a.contents)a.contents.hasOwnProperty(c)&&
b.push(c);return b},symlink:function(a,b,c){a=MEMFS.createNode(a,b,41471,0);a.link=c;return a},readlink:function(a){if(!FS.isLink(a.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return a.link}},stream_ops:{read:function(a,b,c,d,e){var f=a.node.contents;if(e>=a.node.usedBytes)return 0;a=Math.min(a.node.usedBytes-e,d);assert(0<=a);if(8<a&&f.subarray)b.set(f.subarray(e,e+a),c);else for(d=0;d<a;d++)b[c+d]=f[e+d];return a},write:function(a,b,c,d,e,f){if(!d)return 0;a=a.node;a.timestamp=Date.now();
if(b.subarray&&(!a.contents||a.contents.subarray)){if(f)return a.contents=b.subarray(c,c+d),a.usedBytes=d;if(0===a.usedBytes&&0===e)return a.contents=new Uint8Array(b.subarray(c,c+d)),a.usedBytes=d;if(e+d<=a.usedBytes)return a.contents.set(b.subarray(c,c+d),e),d}MEMFS.expandFileStorage(a,e+d);if(a.contents.subarray&&b.subarray)a.contents.set(b.subarray(c,c+d),e);else for(f=0;f<d;f++)a.contents[e+f]=b[c+f];a.usedBytes=Math.max(a.usedBytes,e+d);return d},llseek:function(a,b,c){1===c?b+=a.position:2===
c&&FS.isFile(a.node.mode)&&(b+=a.node.usedBytes);if(0>b)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return b},allocate:function(a,b,c){MEMFS.expandFileStorage(a.node,b+c);a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(a,b,c,d,e,f,g){if(!FS.isFile(a.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);c=a.node.contents;if(g&2||c.buffer!==b&&c.buffer!==b.buffer){if(0<e||e+d<a.node.usedBytes)c=c.subarray?c.subarray(e,e+d):Array.prototype.slice.call(c,e,e+d);a=!0;d=_malloc(d);if(!d)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);
b.set(c,d)}else a=!1,d=c.byteOffset;return{ptr:d,allocated:a}},msync:function(a,b,c,d,e){if(!FS.isFile(a.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(e&2)return 0;MEMFS.stream_ops.write(a,b,0,d,c,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(){if("undefined"!==typeof indexedDB)return indexedDB;var a=null;"object"===typeof window&&(a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB);assert(a,"IDBFS used, but indexedDB not supported");return a},DB_VERSION:21,
DB_STORE_NAME:"FILE_DATA",mount:function(a){return MEMFS.mount.apply(null,arguments)},syncfs:function(a,b,c){IDBFS.getLocalSet(a,function(d,e){if(d)return c(d);IDBFS.getRemoteSet(a,function(a,d){if(a)return c(a);IDBFS.reconcile(b?d:e,b?e:d,c)})})},getDB:function(a,b){var c=IDBFS.dbs[a];if(c)return b(null,c);try{var d=IDBFS.indexedDB().open(a,IDBFS.DB_VERSION)}catch(e){return b(e)}if(!d)return b("Unable to connect to IndexedDB");d.onupgradeneeded=function(a){var b=a.target.result;a=a.target.transaction;
b=b.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?a.objectStore(IDBFS.DB_STORE_NAME):b.createObjectStore(IDBFS.DB_STORE_NAME);b.indexNames.contains("timestamp")||b.createIndex("timestamp","timestamp",{unique:!1})};d.onsuccess=function(){c=d.result;IDBFS.dbs[a]=c;b(null,c)};d.onerror=function(a){b(this.error);a.preventDefault()}},getLocalSet:function(a,b){function c(a){return"."!==a&&".."!==a}function d(a){return function(b){return PATH.join2(a,b)}}var e={};for(a=FS.readdir(a.mountpoint).filter(c).map(d(a.mountpoint));a.length;){var f=
a.pop();try{var g=FS.stat(f)}catch(h){return b(h)}FS.isDir(g.mode)&&a.push.apply(a,FS.readdir(f).filter(c).map(d(f)));e[f]={timestamp:g.mtime}}return b(null,{type:"local",entries:e})},getRemoteSet:function(a,b){var c={};IDBFS.getDB(a.mountpoint,function(a,e){if(a)return b(a);try{var d=e.transaction([IDBFS.DB_STORE_NAME],"readonly");d.onerror=function(a){b(this.error);a.preventDefault()};d.objectStore(IDBFS.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(a){a=a.target.result;if(!a)return b(null,
{type:"remote",db:e,entries:c});c[a.primaryKey]={timestamp:a.key};a.continue()}}catch(g){return b(g)}})},loadLocalEntry:function(a,b){try{var c=FS.lookupPath(a).node;var d=FS.stat(a)}catch(e){return b(e)}return FS.isDir(d.mode)?b(null,{timestamp:d.mtime,mode:d.mode}):FS.isFile(d.mode)?(c.contents=MEMFS.getFileDataAsTypedArray(c),b(null,{timestamp:d.mtime,mode:d.mode,contents:c.contents})):b(Error("node type not supported"))},storeLocalEntry:function(a,b,c){try{if(FS.isDir(b.mode))FS.mkdir(a,b.mode);
else if(FS.isFile(b.mode))FS.writeFile(a,b.contents,{canOwn:!0});else return c(Error("node type not supported"));FS.chmod(a,b.mode);FS.utime(a,b.timestamp,b.timestamp)}catch(d){return c(d)}c(null)},removeLocalEntry:function(a,b){try{FS.lookupPath(a);var c=FS.stat(a);FS.isDir(c.mode)?FS.rmdir(a):FS.isFile(c.mode)&&FS.unlink(a)}catch(d){return b(d)}b(null)},loadRemoteEntry:function(a,b,c){a=a.get(b);a.onsuccess=function(a){c(null,a.target.result)};a.onerror=function(a){c(this.error);a.preventDefault()}},
storeRemoteEntry:function(a,b,c,d){a=a.put(c,b);a.onsuccess=function(){d(null)};a.onerror=function(a){d(this.error);a.preventDefault()}},removeRemoteEntry:function(a,b,c){a=a.delete(b);a.onsuccess=function(){c(null)};a.onerror=function(a){c(this.error);a.preventDefault()}},reconcile:function(a,b,c){function d(a){if(a){if(!d.errored)return d.errored=!0,c(a)}else if(++h>=e)return c(null)}var e=0,f=[];Object.keys(a.entries).forEach(function(c){var d=a.entries[c],g=b.entries[c];if(!g||d.timestamp>g.timestamp)f.push(c),
e++});var g=[];Object.keys(b.entries).forEach(function(b){a.entries[b]||(g.push(b),e++)});if(!e)return c(null);var h=0,l=("remote"===a.type?a.db:b.db).transaction([IDBFS.DB_STORE_NAME],"readwrite"),k=l.objectStore(IDBFS.DB_STORE_NAME);l.onerror=function(a){d(this.error);a.preventDefault()};f.sort().forEach(function(a){"local"===b.type?IDBFS.loadRemoteEntry(k,a,function(b,c){if(b)return d(b);IDBFS.storeLocalEntry(a,c,d)}):IDBFS.loadLocalEntry(a,function(b,c){if(b)return d(b);IDBFS.storeRemoteEntry(k,
a,c,d)})});g.sort().reverse().forEach(function(a){"local"===b.type?IDBFS.removeLocalEntry(a,d):IDBFS.removeRemoteEntry(k,a,d)})}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/);var a=process.binding("constants");a.fs&&(a=a.fs);NODEFS.flagsForNodeMap={1024:a.O_APPEND,64:a.O_CREAT,128:a.O_EXCL,0:a.O_RDONLY,2:a.O_RDWR,4096:a.O_SYNC,512:a.O_TRUNC,1:a.O_WRONLY}},bufferFrom:function(a){return Buffer.alloc?Buffer.from(a):new Buffer(a)},mount:function(a){assert(ENVIRONMENT_IS_NODE);
return NODEFS.createNode(null,"/",NODEFS.getMode(a.opts.root),0)},createNode:function(a,b,c,d){if(!FS.isDir(c)&&!FS.isFile(c)&&!FS.isLink(c))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);a=FS.createNode(a,b,c);a.node_ops=NODEFS.node_ops;a.stream_ops=NODEFS.stream_ops;return a},getMode:function(a){try{var b=fs.lstatSync(a);NODEFS.isWindows&&(b.mode|=(b.mode&292)>>2)}catch(c){if(!c.code)throw c;throw new FS.ErrnoError(ERRNO_CODES[c.code]);}return b.mode},realPath:function(a){for(var b=[];a.parent!==a;)b.push(a.name),
a=a.parent;b.push(a.mount.opts.root);b.reverse();return PATH.join.apply(null,b)},flagsForNode:function(a){a&=-2656257;var b=0,c;for(c in NODEFS.flagsForNodeMap)a&c&&(b|=NODEFS.flagsForNodeMap[c],a^=c);if(a)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return b},node_ops:{getattr:function(a){a=NODEFS.realPath(a);try{var b=fs.lstatSync(a)}catch(c){if(!c.code)throw c;throw new FS.ErrnoError(ERRNO_CODES[c.code]);}NODEFS.isWindows&&!b.blksize&&(b.blksize=4096);NODEFS.isWindows&&!b.blocks&&(b.blocks=(b.size+
b.blksize-1)/b.blksize|0);return{dev:b.dev,ino:b.ino,mode:b.mode,nlink:b.nlink,uid:b.uid,gid:b.gid,rdev:b.rdev,size:b.size,atime:b.atime,mtime:b.mtime,ctime:b.ctime,blksize:b.blksize,blocks:b.blocks}},setattr:function(a,b){var c=NODEFS.realPath(a);try{void 0!==b.mode&&(fs.chmodSync(c,b.mode),a.mode=b.mode);if(void 0!==b.timestamp){var d=new Date(b.timestamp);fs.utimesSync(c,d,d)}void 0!==b.size&&fs.truncateSync(c,b.size)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code]);}},
lookup:function(a,b){var c=PATH.join2(NODEFS.realPath(a),b);c=NODEFS.getMode(c);return NODEFS.createNode(a,b,c)},mknod:function(a,b,c,d){a=NODEFS.createNode(a,b,c,d);b=NODEFS.realPath(a);try{FS.isDir(a.mode)?fs.mkdirSync(b,a.mode):fs.writeFileSync(b,"",{mode:a.mode})}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(ERRNO_CODES[e.code]);}return a},rename:function(a,b,c){a=NODEFS.realPath(a);b=PATH.join2(NODEFS.realPath(b),c);try{fs.renameSync(a,b)}catch(d){if(!d.code)throw d;throw new FS.ErrnoError(ERRNO_CODES[d.code]);
}},unlink:function(a,b){a=PATH.join2(NODEFS.realPath(a),b);try{fs.unlinkSync(a)}catch(c){if(!c.code)throw c;throw new FS.ErrnoError(ERRNO_CODES[c.code]);}},rmdir:function(a,b){a=PATH.join2(NODEFS.realPath(a),b);try{fs.rmdirSync(a)}catch(c){if(!c.code)throw c;throw new FS.ErrnoError(ERRNO_CODES[c.code]);}},readdir:function(a){a=NODEFS.realPath(a);try{return fs.readdirSync(a)}catch(b){if(!b.code)throw b;throw new FS.ErrnoError(ERRNO_CODES[b.code]);}},symlink:function(a,b,c){a=PATH.join2(NODEFS.realPath(a),
b);try{fs.symlinkSync(c,a)}catch(d){if(!d.code)throw d;throw new FS.ErrnoError(ERRNO_CODES[d.code]);}},readlink:function(a){var b=NODEFS.realPath(a);try{return b=fs.readlinkSync(b),b=NODEJS_PATH.relative(NODEJS_PATH.resolve(a.mount.opts.root),b)}catch(c){if(!c.code)throw c;throw new FS.ErrnoError(ERRNO_CODES[c.code]);}}},stream_ops:{open:function(a){var b=NODEFS.realPath(a.node);try{FS.isFile(a.node.mode)&&(a.nfd=fs.openSync(b,NODEFS.flagsForNode(a.flags)))}catch(c){if(!c.code)throw c;throw new FS.ErrnoError(ERRNO_CODES[c.code]);
}},close:function(a){try{FS.isFile(a.node.mode)&&a.nfd&&fs.closeSync(a.nfd)}catch(b){if(!b.code)throw b;throw new FS.ErrnoError(ERRNO_CODES[b.code]);}},read:function(a,b,c,d,e){if(0===d)return 0;try{return fs.readSync(a.nfd,NODEFS.bufferFrom(b.buffer),c,d,e)}catch(f){throw new FS.ErrnoError(ERRNO_CODES[f.code]);}},write:function(a,b,c,d,e){try{return fs.writeSync(a.nfd,NODEFS.bufferFrom(b.buffer),c,d,e)}catch(f){throw new FS.ErrnoError(ERRNO_CODES[f.code]);}},llseek:function(a,b,c){if(1===c)b+=a.position;
else if(2===c&&FS.isFile(a.node.mode))try{var d=fs.fstatSync(a.nfd);b+=d.size}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code]);}if(0>b)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return b}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(a){function b(a){a=a.split("/");for(var b=d,c=0;c<a.length-1;c++){var f=a.slice(0,c+1).join("/");e[f]||(e[f]=WORKERFS.createNode(b,a[c],WORKERFS.DIR_MODE,0));b=e[f]}return b}function c(a){a=a.split("/");return a[a.length-1]}assert(ENVIRONMENT_IS_WORKER);
WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var d=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),e={};Array.prototype.forEach.call(a.opts.files||[],function(a){WORKERFS.createNode(b(a.name),c(a.name),WORKERFS.FILE_MODE,0,a,a.lastModifiedDate)});(a.opts.blobs||[]).forEach(function(a){WORKERFS.createNode(b(a.name),c(a.name),WORKERFS.FILE_MODE,0,a.data)});(a.opts.packages||[]).forEach(function(a){a.metadata.files.forEach(function(d){var e=d.filename.substr(1);WORKERFS.createNode(b(e),c(e),
WORKERFS.FILE_MODE,0,a.blob.slice(d.start,d.end))})});return d},createNode:function(a,b,c,d,e,f){d=FS.createNode(a,b,c);d.mode=c;d.node_ops=WORKERFS.node_ops;d.stream_ops=WORKERFS.stream_ops;d.timestamp=(f||new Date).getTime();assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE);c===WORKERFS.FILE_MODE?(d.size=e.size,d.contents=e):(d.size=4096,d.contents={});a&&(a.contents[b]=d);return d},node_ops:{getattr:function(a){return{dev:1,ino:void 0,mode:a.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:a.size,atime:new Date(a.timestamp),
mtime:new Date(a.timestamp),ctime:new Date(a.timestamp),blksize:4096,blocks:Math.ceil(a.size/4096)}},setattr:function(a,b){void 0!==b.mode&&(a.mode=b.mode);void 0!==b.timestamp&&(a.timestamp=b.timestamp)},lookup:function(a,b){throw new FS.ErrnoError(ERRNO_CODES.ENOENT);},mknod:function(a,b,c,d){throw new FS.ErrnoError(ERRNO_CODES.EPERM);},rename:function(a,b,c){throw new FS.ErrnoError(ERRNO_CODES.EPERM);},unlink:function(a,b){throw new FS.ErrnoError(ERRNO_CODES.EPERM);},rmdir:function(a,b){throw new FS.ErrnoError(ERRNO_CODES.EPERM);
},readdir:function(a){var b=[".",".."],c;for(c in a.contents)a.contents.hasOwnProperty(c)&&b.push(c);return b},symlink:function(a,b,c){throw new FS.ErrnoError(ERRNO_CODES.EPERM);},readlink:function(a){throw new FS.ErrnoError(ERRNO_CODES.EPERM);}},stream_ops:{read:function(a,b,c,d,e){if(e>=a.node.size)return 0;a=a.node.contents.slice(e,e+d);d=WORKERFS.reader.readAsArrayBuffer(a);b.set(new Uint8Array(d),c);return a.size},write:function(a,b,c,d,e){throw new FS.ErrnoError(ERRNO_CODES.EIO);},llseek:function(a,
b,c){1===c?b+=a.position:2===c&&FS.isFile(a.node.mode)&&(b+=a.node.size);if(0>b)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return b}}};STATICTOP+=16;STATICTOP+=16;STATICTOP+=16;
var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(a){if(!(a instanceof FS.ErrnoError))throw a+" : "+stackTrace();return ___setErrNo(a.errno)},lookupPath:function(a,b){a=PATH.resolve(FS.cwd(),a);b=b||{};if(!a)return{path:"",node:null};var c={follow_mount:!0,recurse_count:0},
d;for(d in c)void 0===b[d]&&(b[d]=c[d]);if(8<b.recurse_count)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);a=PATH.normalizeArray(a.split("/").filter(function(a){return!!a}),!1);var e=FS.root;c="/";for(d=0;d<a.length;d++){var f=d===a.length-1;if(f&&b.parent)break;e=FS.lookupNode(e,a[d]);c=PATH.join2(c,a[d]);FS.isMountpoint(e)&&(!f||f&&b.follow_mount)&&(e=e.mounted.root);if(!f||b.follow)for(f=0;FS.isLink(e.mode);)if(e=FS.readlink(c),c=PATH.resolve(PATH.dirname(c),e),e=FS.lookupPath(c,{recurse_count:b.recurse_count}).node,
40<f++)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);}return{path:c,node:e}},getPath:function(a){for(var b;;){if(FS.isRoot(a))return a=a.mount.mountpoint,b?"/"!==a[a.length-1]?a+"/"+b:a+b:a;b=b?a.name+"/"+b:a.name;a=a.parent}},hashName:function(a,b){for(var c=0,d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%FS.nameTable.length},hashAddNode:function(a){var b=FS.hashName(a.parent.id,a.name);a.name_next=FS.nameTable[b];FS.nameTable[b]=a},hashRemoveNode:function(a){var b=FS.hashName(a.parent.id,
a.name);if(FS.nameTable[b]===a)FS.nameTable[b]=a.name_next;else for(b=FS.nameTable[b];b;){if(b.name_next===a){b.name_next=a.name_next;break}b=b.name_next}},lookupNode:function(a,b){var c=FS.mayLookup(a);if(c)throw new FS.ErrnoError(c,a);c=FS.hashName(a.id,b);for(c=FS.nameTable[c];c;c=c.name_next){var d=c.name;if(c.parent.id===a.id&&d===b)return c}return FS.lookup(a,b)},createNode:function(a,b,c,d){FS.FSNode||(FS.FSNode=function(a,b,c,d){a||(a=this);this.parent=a;this.mount=a.mount;this.mounted=null;
this.id=FS.nextInode++;this.name=b;this.mode=c;this.node_ops={};this.stream_ops={};this.rdev=d},FS.FSNode.prototype={},Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return 365===(this.mode&365)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(this.mode&146)},set:function(a){a?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}}));a=new FS.FSNode(a,
b,c,d);FS.hashAddNode(a);return a},destroyNode:function(a){FS.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return 32768===(a&61440)},isDir:function(a){return 16384===(a&61440)},isLink:function(a){return 40960===(a&61440)},isChrdev:function(a){return 8192===(a&61440)},isBlkdev:function(a){return 24576===(a&61440)},isFIFO:function(a){return 4096===(a&61440)},isSocket:function(a){return 49152===(a&49152)},flagModes:{r:0,rs:1052672,
"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(a){var b=FS.flagModes[a];if("undefined"===typeof b)throw Error("Unknown file open mode: "+a);return b},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];a&512&&(b+="w");return b},nodePermissions:function(a,b){if(FS.ignorePermissions)return 0;if(-1===b.indexOf("r")||a.mode&292){if(-1!==b.indexOf("w")&&!(a.mode&146)||-1!==b.indexOf("x")&&!(a.mode&73))return ERRNO_CODES.EACCES}else return ERRNO_CODES.EACCES;
return 0},mayLookup:function(a){var b=FS.nodePermissions(a,"x");return b?b:a.node_ops.lookup?0:ERRNO_CODES.EACCES},mayCreate:function(a,b){try{return FS.lookupNode(a,b),ERRNO_CODES.EEXIST}catch(c){}return FS.nodePermissions(a,"wx")},mayDelete:function(a,b,c){try{var d=FS.lookupNode(a,b)}catch(e){return e.errno}if(a=FS.nodePermissions(a,"wx"))return a;if(c){if(!FS.isDir(d.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(d)||FS.getPath(d)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(d.mode))return ERRNO_CODES.EISDIR;
return 0},mayOpen:function(a,b){return a?FS.isLink(a.mode)?ERRNO_CODES.ELOOP:FS.isDir(a.mode)&&("r"!==FS.flagsToPermissionString(b)||b&512)?ERRNO_CODES.EISDIR:FS.nodePermissions(a,FS.flagsToPermissionString(b)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(a,b){b=b||FS.MAX_OPEN_FDS;for(a=a||0;a<=b;a++)if(!FS.streams[a])return a;throw new FS.ErrnoError(ERRNO_CODES.EMFILE);},getStream:function(a){return FS.streams[a]},createStream:function(a,b,c){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype=
{},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return 1!==(this.flags&2097155)}},isWrite:{get:function(){return 0!==(this.flags&2097155)}},isAppend:{get:function(){return this.flags&1024}}}));var d=new FS.FSStream,e;for(e in a)d[e]=a[e];a=d;b=FS.nextfd(b,c);a.fd=b;return FS.streams[b]=a},closeStream:function(a){FS.streams[a]=null},chrdev_stream_ops:{open:function(a){var b=FS.getDevice(a.node.rdev);a.stream_ops=
b.stream_ops;a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,b){FS.devices[a]={stream_ops:b}},getDevice:function(a){return FS.devices[a]},getMounts:function(a){var b=[];for(a=[a];a.length;){var c=a.pop();b.push(c);a.push.apply(a,c.mounts)}return b},syncfs:function(a,b){function c(a){assert(0<FS.syncFSRequests);FS.syncFSRequests--;
return b(a)}function d(a){if(a){if(!d.errored)return d.errored=!0,c(a)}else++f>=e.length&&c(null)}"function"===typeof a&&(b=a,a=!1);FS.syncFSRequests++;1<FS.syncFSRequests&&console.log("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var e=FS.getMounts(FS.root.mount),f=0;e.forEach(function(b){if(!b.type.syncfs)return d(null);b.type.syncfs(b,a,d)})},mount:function(a,b,c){var d="/"===c,e=!c;if(d&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);
if(!d&&!e){var f=FS.lookupPath(c,{follow_mount:!1});c=f.path;f=f.node;if(FS.isMountpoint(f))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(f.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);}b={type:a,opts:b,mountpoint:c,mounts:[]};a=a.mount(b);a.mount=b;b.root=a;d?FS.root=a:f&&(f.mounted=b,f.mount&&f.mount.mounts.push(b));return a},unmount:function(a){a=FS.lookupPath(a,{follow_mount:!1});if(!FS.isMountpoint(a.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);a=a.node;var b=a.mounted,c=
FS.getMounts(b);Object.keys(FS.nameTable).forEach(function(a){for(a=FS.nameTable[a];a;){var b=a.name_next;-1!==c.indexOf(a.mount)&&FS.destroyNode(a);a=b}});a.mounted=null;b=a.mount.mounts.indexOf(b);assert(-1!==b);a.mount.mounts.splice(b,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(a,b,c){var d=FS.lookupPath(a,{parent:!0}).node;a=PATH.basename(a);if(!a||"."===a||".."===a)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var e=FS.mayCreate(d,a);if(e)throw new FS.ErrnoError(e);if(!d.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);
return d.node_ops.mknod(d,a,b,c)},create:function(a,b){return FS.mknod(a,(void 0!==b?b:438)&4095|32768,0)},mkdir:function(a,b){return FS.mknod(a,(void 0!==b?b:511)&1023|16384,0)},mkdirTree:function(a,b){a=a.split("/");for(var c="",d=0;d<a.length;++d)if(a[d]){c+="/"+a[d];try{FS.mkdir(c,b)}catch(e){if(e.errno!=ERRNO_CODES.EEXIST)throw e;}}},mkdev:function(a,b,c){"undefined"===typeof c&&(c=b,b=438);return FS.mknod(a,b|8192,c)},symlink:function(a,b){if(!PATH.resolve(a))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);
var c=FS.lookupPath(b,{parent:!0}).node;if(!c)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);b=PATH.basename(b);var d=FS.mayCreate(c,b);if(d)throw new FS.ErrnoError(d);if(!c.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return c.node_ops.symlink(c,b,a)},rename:function(a,b){var c=PATH.dirname(a),d=PATH.dirname(b),e=PATH.basename(a),f=PATH.basename(b);try{var g=FS.lookupPath(a,{parent:!0});var h=g.node;g=FS.lookupPath(b,{parent:!0});var l=g.node}catch(m){throw new FS.ErrnoError(ERRNO_CODES.EBUSY);
}if(!h||!l)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(h.mount!==l.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);g=FS.lookupNode(h,e);d=PATH.relative(a,d);if("."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);d=PATH.relative(b,c);if("."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);try{var k=FS.lookupNode(l,f)}catch(m){}if(g!==k){c=FS.isDir(g.mode);if(e=FS.mayDelete(h,e,c))throw new FS.ErrnoError(e);if(e=k?FS.mayDelete(l,f,c):FS.mayCreate(l,f))throw new FS.ErrnoError(e);
if(!h.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(g)||k&&FS.isMountpoint(k))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(l!==h&&(e=FS.nodePermissions(h,"w")))throw new FS.ErrnoError(e);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(a,b)}catch(m){console.log("FS.trackingDelegate['willMovePath']('"+a+"', '"+b+"') threw an exception: "+m.message)}FS.hashRemoveNode(g);try{h.node_ops.rename(g,l,f)}catch(m){throw m;}finally{FS.hashAddNode(g)}try{if(FS.trackingDelegate.onMovePath)FS.trackingDelegate.onMovePath(a,
b)}catch(m){console.log("FS.trackingDelegate['onMovePath']('"+a+"', '"+b+"') threw an exception: "+m.message)}}},rmdir:function(a){var b=FS.lookupPath(a,{parent:!0}).node,c=PATH.basename(a),d=FS.lookupNode(b,c),e=FS.mayDelete(b,c,!0);if(e)throw new FS.ErrnoError(e);if(!b.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(d))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(a)}catch(f){console.log("FS.trackingDelegate['willDeletePath']('"+
a+"') threw an exception: "+f.message)}b.node_ops.rmdir(b,c);FS.destroyNode(d);try{if(FS.trackingDelegate.onDeletePath)FS.trackingDelegate.onDeletePath(a)}catch(f){console.log("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+f.message)}},readdir:function(a){a=FS.lookupPath(a,{follow:!0}).node;if(!a.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return a.node_ops.readdir(a)},unlink:function(a){var b=FS.lookupPath(a,{parent:!0}).node,c=PATH.basename(a),d=FS.lookupNode(b,
c),e=FS.mayDelete(b,c,!1);if(e)throw new FS.ErrnoError(e);if(!b.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(d))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(a)}catch(f){console.log("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+f.message)}b.node_ops.unlink(b,c);FS.destroyNode(d);try{if(FS.trackingDelegate.onDeletePath)FS.trackingDelegate.onDeletePath(a)}catch(f){console.log("FS.trackingDelegate['onDeletePath']('"+
a+"') threw an exception: "+f.message)}},readlink:function(a){a=FS.lookupPath(a).node;if(!a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!a.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(a.parent),a.node_ops.readlink(a))},stat:function(a,b){a=FS.lookupPath(a,{follow:!b}).node;if(!a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!a.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return a.node_ops.getattr(a)},lstat:function(a){return FS.stat(a,
!0)},chmod:function(a,b,c){a="string"===typeof a?FS.lookupPath(a,{follow:!c}).node:a;if(!a.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);a.node_ops.setattr(a,{mode:b&4095|a.mode&-4096,timestamp:Date.now()})},lchmod:function(a,b){FS.chmod(a,b,!0)},fchmod:function(a,b){a=FS.getStream(a);if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(a.node,b)},chown:function(a,b,c,d){a="string"===typeof a?FS.lookupPath(a,{follow:!d}).node:a;if(!a.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);
a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(a,b,c){FS.chown(a,b,c,!0)},fchown:function(a,b,c){a=FS.getStream(a);if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(a.node,b,c)},truncate:function(a,b){if(0>b)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);a="string"===typeof a?FS.lookupPath(a,{follow:!0}).node:a;if(!a.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(a.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(a.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);
var c=FS.nodePermissions(a,"w");if(c)throw new FS.ErrnoError(c);a.node_ops.setattr(a,{size:b,timestamp:Date.now()})},ftruncate:function(a,b){a=FS.getStream(a);if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(0===(a.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(a.node,b)},utime:function(a,b,c){a=FS.lookupPath(a,{follow:!0}).node;a.node_ops.setattr(a,{timestamp:Math.max(b,c)})},open:function(a,b,c,d,e){if(""===a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);b="string"===typeof b?
FS.modeStringToFlags(b):b;c=b&64?("undefined"===typeof c?438:c)&4095|32768:0;if("object"===typeof a)var f=a;else{a=PATH.normalize(a);try{f=FS.lookupPath(a,{follow:!(b&131072)}).node}catch(l){}}var g=!1;if(b&64)if(f){if(b&128)throw new FS.ErrnoError(ERRNO_CODES.EEXIST);}else f=FS.mknod(a,c,0),g=!0;if(!f)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);FS.isChrdev(f.mode)&&(b&=-513);if(b&65536&&!FS.isDir(f.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!g){var h=FS.mayOpen(f,b);if(h)throw new FS.ErrnoError(h);
}b&512&&FS.truncate(f,0);b&=-641;c=FS.createStream({node:f,path:FS.getPath(f),flags:b,seekable:!0,position:0,stream_ops:f.stream_ops,ungotten:[],error:!1},d,e);c.stream_ops.open&&c.stream_ops.open(c);!Module.logReadFiles||b&1||(FS.readFiles||(FS.readFiles={}),a in FS.readFiles||(FS.readFiles[a]=1,h("read file: "+a)));try{FS.trackingDelegate.onOpenFile&&(h=0,1!==(b&2097155)&&(h|=FS.tracking.openFlags.READ),0!==(b&2097155)&&(h|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(a,h))}catch(l){console.log("FS.trackingDelegate['onOpenFile']('"+
a+"', flags) threw an exception: "+l.message)}return c},close:function(a){if(FS.isClosed(a))throw new FS.ErrnoError(ERRNO_CODES.EBADF);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(b){throw b;}finally{FS.closeStream(a.fd)}a.fd=null},isClosed:function(a){return null===a.fd},llseek:function(a,b,c){if(FS.isClosed(a))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!a.seekable||!a.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);a.position=a.stream_ops.llseek(a,
b,c);a.ungotten=[];return a.position},read:function(a,b,c,d,e){if(0>d||0>e)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(FS.isClosed(a))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(1===(a.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(a.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!a.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var f="undefined"!==typeof e;if(!f)e=a.position;else if(!a.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);b=a.stream_ops.read(a,
b,c,d,e);f||(a.position+=b);return b},write:function(a,b,c,d,e,f){if(0>d||0>e)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(FS.isClosed(a))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(0===(a.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(a.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!a.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);a.flags&1024&&FS.llseek(a,0,2);var g="undefined"!==typeof e;if(!g)e=a.position;else if(!a.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);
b=a.stream_ops.write(a,b,c,d,e,f);g||(a.position+=b);try{if(a.path&&FS.trackingDelegate.onWriteToFile)FS.trackingDelegate.onWriteToFile(a.path)}catch(h){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+h.message)}return b},allocate:function(a,b,c){if(FS.isClosed(a))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(0>b||0>=c)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(a.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile(a.node.mode)&&!FS.isDir(a.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);
if(!a.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);a.stream_ops.allocate(a,b,c)},mmap:function(a,b,c,d,e,f,g){if(1===(a.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!a.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return a.stream_ops.mmap(a,b,c,d,e,f,g)},msync:function(a,b,c,d,e){return a&&a.stream_ops.msync?a.stream_ops.msync(a,b,c,d,e):0},munmap:function(a){return 0},ioctl:function(a,b,c){if(!a.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);
return a.stream_ops.ioctl(a,b,c)},readFile:function(a,b){b=b||{};b.flags=b.flags||"r";b.encoding=b.encoding||"binary";if("utf8"!==b.encoding&&"binary"!==b.encoding)throw Error('Invalid encoding type "'+b.encoding+'"');var c,d=FS.open(a,b.flags);a=FS.stat(a).size;var e=new Uint8Array(a);FS.read(d,e,0,a,0);"utf8"===b.encoding?c=UTF8ArrayToString(e,0):"binary"===b.encoding&&(c=e);FS.close(d);return c},writeFile:function(a,b,c){c=c||{};c.flags=c.flags||"w";a=FS.open(a,c.flags,c.mode);if("string"===typeof b){var d=
new Uint8Array(lengthBytesUTF8(b)+1);b=stringToUTF8Array(b,d,0,d.length);FS.write(a,d,0,b,void 0,c.canOwn)}else if(ArrayBuffer.isView(b))FS.write(a,b,0,b.byteLength,void 0,c.canOwn);else throw Error("Unsupported data type");FS.close(a)},cwd:function(){return FS.currentPath},chdir:function(a){a=FS.lookupPath(a,{follow:!0});if(null===a.node)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!FS.isDir(a.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var b=FS.nodePermissions(a.node,"x");if(b)throw new FS.ErrnoError(b);
FS.currentPath=a.path},createDefaultDirectories:function(){FS.mkdir("/tmp");FS.mkdir("/home");FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev");FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(a,b,e,f,g){return f}});FS.mkdev("/dev/null",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev("/dev/tty",FS.makedev(5,0));FS.mkdev("/dev/tty1",FS.makedev(6,0));if("undefined"!==
typeof crypto){var a=new Uint8Array(1);var b=function(){crypto.getRandomValues(a);return a[0]}}else ENVIRONMENT_IS_NODE||(b=function(){abort("random_device")});FS.createDevice("/dev","random",b);FS.createDevice("/dev","urandom",b);FS.mkdir("/dev/shm");FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc");FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd");FS.mount({mount:function(){var a=FS.createNode("/proc/self","fd",16895,73);a.node_ops={lookup:function(a,c){var b=FS.getStream(+c);
if(!b)throw new FS.ErrnoError(ERRNO_CODES.EBADF);a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return b.path}}};return a.parent=a}};return a}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin");Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout");Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1",
"/dev/stderr");var a=FS.open("/dev/stdin","r");assert(0===a.fd,"invalid handle for stdin ("+a.fd+")");a=FS.open("/dev/stdout","w");assert(1===a.fd,"invalid handle for stdout ("+a.fd+")");a=FS.open("/dev/stderr","w");assert(2===a.fd,"invalid handle for stderr ("+a.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(a,b){this.node=b;this.setErrno=function(a){this.errno=a;for(var b in ERRNO_CODES)if(ERRNO_CODES[b]===a){this.code=b;break}};this.setErrno(a);this.message=ERRNO_MESSAGES[a];
this.stack&&Object.defineProperty(this,"stack",{value:Error().stack,writable:!0})},FS.ErrnoError.prototype=Error(),FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach(function(a){FS.genericErrors[a]=new FS.ErrnoError(a);FS.genericErrors[a].stack="<generic error, no stack>"}))},staticInit:function(){FS.ensureErrnoError();FS.nameTable=Array(4096);FS.mount(MEMFS,{},"/");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={MEMFS:MEMFS,
IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(a,b,c){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)");FS.init.initialized=!0;FS.ensureErrnoError();Module.stdin=a||Module.stdin;Module.stdout=b||Module.stdout;Module.stderr=c||Module.stderr;FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var a=Module._fflush;a&&a(0);
for(a=0;a<FS.streams.length;a++){var b=FS.streams[a];b&&FS.close(b)}},getMode:function(a,b){var c=0;a&&(c|=365);b&&(c|=146);return c},joinPath:function(a,b){a=PATH.join.apply(null,a);b&&"/"==a[0]&&(a=a.substr(1));return a},absolutePath:function(a,b){return PATH.resolve(b,a)},standardizePath:function(a){return PATH.normalize(a)},findObject:function(a,b){a=FS.analyzePath(a,b);if(a.exists)return a.object;___setErrNo(a.error);return null},analyzePath:function(a,b){try{var c=FS.lookupPath(a,{follow:!b});
a=c.path}catch(e){}var d={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{c=FS.lookupPath(a,{parent:!0}),d.parentExists=!0,d.parentPath=c.path,d.parentObject=c.node,d.name=PATH.basename(a),c=FS.lookupPath(a,{follow:!b}),d.exists=!0,d.path=c.path,d.object=c.node,d.name=c.node.name,d.isRoot="/"===c.path}catch(e){d.error=e.errno}return d},createFolder:function(a,b,c,d){a=PATH.join2("string"===typeof a?a:FS.getPath(a),b);c=FS.getMode(c,
d);return FS.mkdir(a,c)},createPath:function(a,b,c,d){a="string"===typeof a?a:FS.getPath(a);for(b=b.split("/").reverse();b.length;)if(c=b.pop()){var e=PATH.join2(a,c);try{FS.mkdir(e)}catch(f){}a=e}return e},createFile:function(a,b,c,d,e){a=PATH.join2("string"===typeof a?a:FS.getPath(a),b);d=FS.getMode(d,e);return FS.create(a,d)},createDataFile:function(a,b,c,d,e,f){a=b?PATH.join2("string"===typeof a?a:FS.getPath(a),b):a;d=FS.getMode(d,e);e=FS.create(a,d);if(c){if("string"===typeof c){a=Array(c.length);
b=0;for(var g=c.length;b<g;++b)a[b]=c.charCodeAt(b);c=a}FS.chmod(e,d|146);a=FS.open(e,"w");FS.write(a,c,0,c.length,0,f);FS.close(a);FS.chmod(e,d)}return e},createDevice:function(a,b,c,d){a=PATH.join2("string"===typeof a?a:FS.getPath(a),b);b=FS.getMode(!!c,!!d);FS.createDevice.major||(FS.createDevice.major=64);var e=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(e,{open:function(a){a.seekable=!1},close:function(a){d&&d.buffer&&d.buffer.length&&d(10)},read:function(a,b,d,e,k){for(var f=k=0;f<
e;f++){try{var g=c()}catch(q){throw new FS.ErrnoError(ERRNO_CODES.EIO);}if(void 0===g&&0===k)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===g||void 0===g)break;k++;b[d+f]=g}k&&(a.node.timestamp=Date.now());return k},write:function(a,b,c,e,k){for(k=0;k<e;k++)try{d(b[c+k])}catch(m){throw new FS.ErrnoError(ERRNO_CODES.EIO);}e&&(a.node.timestamp=Date.now());return k}});return FS.mkdev(a,b,e)},createLink:function(a,b,c,d,e){a=PATH.join2("string"===typeof a?a:FS.getPath(a),b);return FS.symlink(c,
a)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;var b=!0;if("undefined"!==typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Module.read)try{a.contents=intArrayFromString(Module.read(a.url),!0),a.usedBytes=a.contents.length}catch(c){b=!1}else throw Error("Cannot load without read() or XMLHttpRequest.");
b||___setErrNo(ERRNO_CODES.EIO);return b},createLazyFile:function(a,b,c,d,e){function f(){this.lengthKnown=!1;this.chunks=[]}f.prototype.get=function(a){if(!(a>this.length-1||0>a)){var b=a%this.chunkSize;return this.getter(a/this.chunkSize|0)[b]}};f.prototype.setDataGetter=function(a){this.getter=a};f.prototype.cacheLength=function(){var a=new XMLHttpRequest;a.open("HEAD",c,!1);a.send(null);if(!(200<=a.status&&300>a.status||304===a.status))throw Error("Couldn't load "+c+". Status: "+a.status);var b=
Number(a.getResponseHeader("Content-length")),d,e=(d=a.getResponseHeader("Accept-Ranges"))&&"bytes"===d;a=(d=a.getResponseHeader("Content-Encoding"))&&"gzip"===d;var f=1048576;e||(f=b);var g=this;g.setDataGetter(function(a){var d=a*f,e=(a+1)*f-1;e=Math.min(e,b-1);if("undefined"===typeof g.chunks[a]){var h=g.chunks;if(d>e)throw Error("invalid range ("+d+", "+e+") or no bytes requested!");if(e>b-1)throw Error("only "+b+" bytes available! programmer error!");var k=new XMLHttpRequest;k.open("GET",c,!1);
b!==f&&k.setRequestHeader("Range","bytes="+d+"-"+e);"undefined"!=typeof Uint8Array&&(k.responseType="arraybuffer");k.overrideMimeType&&k.overrideMimeType("text/plain; charset=x-user-defined");k.send(null);if(!(200<=k.status&&300>k.status||304===k.status))throw Error("Couldn't load "+c+". Status: "+k.status);d=void 0!==k.response?new Uint8Array(k.response||[]):intArrayFromString(k.responseText||"",!0);h[a]=d}if("undefined"===typeof g.chunks[a])throw Error("doXHR failed!");return g.chunks[a]});if(a||
!b)f=b=1,f=b=this.getter(0).length,console.log("LazyFiles on gzip forces download of the whole file when length is accessed");this._length=b;this._chunkSize=f;this.lengthKnown=!0};if("undefined"!==typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var g=new f;Object.defineProperties(g,{length:{get:function(){this.lengthKnown||this.cacheLength();return this._length}},chunkSize:{get:function(){this.lengthKnown||
this.cacheLength();return this._chunkSize}}});g={isDevice:!1,contents:g}}else g={isDevice:!1,url:c};var h=FS.createFile(a,b,g,d,e);g.contents?h.contents=g.contents:g.url&&(h.contents=null,h.url=g.url);Object.defineProperties(h,{usedBytes:{get:function(){return this.contents.length}}});var l={};Object.keys(h.stream_ops).forEach(function(a){var b=h.stream_ops[a];l[a]=function(){if(!FS.forceLoadFile(h))throw new FS.ErrnoError(ERRNO_CODES.EIO);return b.apply(null,arguments)}});l.read=function(a,b,c,d,
e){if(!FS.forceLoadFile(h))throw new FS.ErrnoError(ERRNO_CODES.EIO);a=a.node.contents;if(e>=a.length)return 0;d=Math.min(a.length-e,d);assert(0<=d);if(a.slice)for(var f=0;f<d;f++)b[c+f]=a[e+f];else for(f=0;f<d;f++)b[c+f]=a.get(e+f);return d};h.stream_ops=l;return h},createPreloadedFile:function(a,b,c,d,e,f,g,h,l,k){function m(c){function m(c){k&&k();h||FS.createDataFile(a,b,c,d,e,l);f&&f();removeRunDependency(q)}var n=!1;Module.preloadPlugins.forEach(function(a){!n&&a.canHandle(p)&&(a.handle(c,p,
m,function(){g&&g();removeRunDependency(q)}),n=!0)});n||m(c)}Browser.init();var p=b?PATH.resolve(PATH.join2(a,b)):a,q=getUniqueRunDependency("cp "+p);addRunDependency(q);"string"==typeof c?Browser.asyncLoad(c,function(a){m(a)},g):m(c)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(a,b,c){b=b||function(){};c=c||function(){};
var d=FS.indexedDB();try{var e=d.open(FS.DB_NAME(),FS.DB_VERSION)}catch(f){return c(f)}e.onupgradeneeded=function(){console.log("creating db");e.result.createObjectStore(FS.DB_STORE_NAME)};e.onsuccess=function(){var d=e.result.transaction([FS.DB_STORE_NAME],"readwrite"),g=d.objectStore(FS.DB_STORE_NAME),h=0,l=0,k=a.length;a.forEach(function(a){a=g.put(FS.analyzePath(a).object.contents,a);a.onsuccess=function(){h++;h+l==k&&(0==l?b():c())};a.onerror=function(){l++;h+l==k&&(0==l?b():c())}});d.onerror=
c};e.onerror=c},loadFilesFromDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=FS.indexedDB();try{var e=d.open(FS.DB_NAME(),FS.DB_VERSION)}catch(f){return c(f)}e.onupgradeneeded=c;e.onsuccess=function(){var d=e.result;try{var g=d.transaction([FS.DB_STORE_NAME],"readonly")}catch(p){c(p);return}var h=g.objectStore(FS.DB_STORE_NAME),l=0,k=0,m=a.length;a.forEach(function(a){var d=h.get(a);d.onsuccess=function(){FS.analyzePath(a).exists&&FS.unlink(a);FS.createDataFile(PATH.dirname(a),PATH.basename(a),
d.result,!0,!0,!0);l++;l+k==m&&(0==k?b():c())};d.onerror=function(){k++;l+k==m&&(0==k?b():c())}});g.onerror=c};e.onerror=c}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(a,b){if("/"!==b[0]){if(-100===a)a=FS.cwd();else{a=FS.getStream(a);if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);a=a.path}b=PATH.join2(a,b)}return b},doStat:function(a,b,c){try{var d=a(b)}catch(e){if(e&&e.node&&PATH.normalize(b)!==PATH.normalize(FS.getPath(e.node)))return-ERRNO_CODES.ENOTDIR;throw e;}HEAP32[c>>
2]=d.dev;HEAP32[c+4>>2]=0;HEAP32[c+8>>2]=d.ino;HEAP32[c+12>>2]=d.mode;HEAP32[c+16>>2]=d.nlink;HEAP32[c+20>>2]=d.uid;HEAP32[c+24>>2]=d.gid;HEAP32[c+28>>2]=d.rdev;HEAP32[c+32>>2]=0;HEAP32[c+36>>2]=d.size;HEAP32[c+40>>2]=4096;HEAP32[c+44>>2]=d.blocks;HEAP32[c+48>>2]=d.atime.getTime()/1E3|0;HEAP32[c+52>>2]=0;HEAP32[c+56>>2]=d.mtime.getTime()/1E3|0;HEAP32[c+60>>2]=0;HEAP32[c+64>>2]=d.ctime.getTime()/1E3|0;HEAP32[c+68>>2]=0;HEAP32[c+72>>2]=d.ino;return 0},doMsync:function(a,b,c,d){a=new Uint8Array(HEAPU8.subarray(a,
a+c));FS.msync(b,a,0,c,d)},doMkdir:function(a,b){a=PATH.normalize(a);"/"===a[a.length-1]&&(a=a.substr(0,a.length-1));FS.mkdir(a,b,0);return 0},doMknod:function(a,b,c){switch(b&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}FS.mknod(a,b,c);return 0},doReadlink:function(a,b,c){if(0>=c)return-ERRNO_CODES.EINVAL;a=FS.readlink(a);var d=Math.min(c,lengthBytesUTF8(a)),e=HEAP8[b+d];stringToUTF8(a,b,c+1);HEAP8[b+d]=e;return d},doAccess:function(a,b){if(b&
-8)return-ERRNO_CODES.EINVAL;a=FS.lookupPath(a,{follow:!0}).node;var c="";b&4&&(c+="r");b&2&&(c+="w");b&1&&(c+="x");return c&&FS.nodePermissions(a,c)?-ERRNO_CODES.EACCES:0},doDup:function(a,b,c){var d=FS.getStream(c);d&&FS.close(d);return FS.open(a,b,0,c,c).fd},doReadv:function(a,b,c,d){for(var e=0,f=0;f<c;f++){var g=HEAP32[b+(8*f+4)>>2],h=FS.read(a,HEAP8,HEAP32[b+8*f>>2],g,d);if(0>h)return-1;e+=h;if(h<g)break}return e},doWritev:function(a,b,c,d){for(var e=0,f=0;f<c;f++){var g=FS.write(a,HEAP8,HEAP32[b+
8*f>>2],HEAP32[b+(8*f+4)>>2],d);if(0>g)return-1;e+=g}return e},varargs:0,get:function(a){SYSCALLS.varargs+=4;return HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(){return Pointer_stringify(SYSCALLS.get())},getStreamFromFD:function(){var a=FS.getStream(SYSCALLS.get());if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return a},getSocketFromFD:function(){var a=SOCKFS.getSocket(SYSCALLS.get());if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return a},getSocketAddress:function(a){var b=SYSCALLS.get(),
c=SYSCALLS.get();if(a&&0===b)return null;a=__read_sockaddr(b,c);if(a.errno)throw new FS.ErrnoError(a.errno);a.addr=DNS.lookup_addr(a.addr)||a.addr;return a},get64:function(){var a=SYSCALLS.get(),b=SYSCALLS.get();0<=a?assert(0===b):assert(-1===b);return a},getZero:function(){assert(0===SYSCALLS.get())}};
function ___syscall140(a,b){SYSCALLS.varargs=b;try{var c=SYSCALLS.getStreamFromFD();SYSCALLS.get();var d=SYSCALLS.get(),e=SYSCALLS.get(),f=SYSCALLS.get();FS.llseek(c,d,f);HEAP32[e>>2]=c.position;c.getdents&&0===d&&0===f&&(c.getdents=null);return 0}catch(g){return"undefined"!==typeof FS&&g instanceof FS.ErrnoError||abort(g),-g.errno}}
function ___syscall145(a,b){SYSCALLS.varargs=b;try{var c=SYSCALLS.getStreamFromFD(),d=SYSCALLS.get(),e=SYSCALLS.get();return SYSCALLS.doReadv(c,d,e)}catch(f){return"undefined"!==typeof FS&&f instanceof FS.ErrnoError||abort(f),-f.errno}}function ___syscall146(a,b){SYSCALLS.varargs=b;try{var c=SYSCALLS.getStreamFromFD(),d=SYSCALLS.get(),e=SYSCALLS.get();return SYSCALLS.doWritev(c,d,e)}catch(f){return"undefined"!==typeof FS&&f instanceof FS.ErrnoError||abort(f),-f.errno}}
function ___syscall221(a,b){SYSCALLS.varargs=b;try{var c=SYSCALLS.getStreamFromFD();switch(SYSCALLS.get()){case 0:var d=SYSCALLS.get();return 0>d?-ERRNO_CODES.EINVAL:FS.open(c.path,c.flags,0,d).fd;case 1:case 2:return 0;case 3:return c.flags;case 4:return d=SYSCALLS.get(),c.flags|=d,0;case 12:case 12:return d=SYSCALLS.get(),HEAP16[d+0>>1]=2,0;case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(e){return"undefined"!==
typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall5(a,b){SYSCALLS.varargs=b;try{var c=SYSCALLS.getStr(),d=SYSCALLS.get(),e=SYSCALLS.get();return FS.open(c,d,e).fd}catch(f){return"undefined"!==typeof FS&&f instanceof FS.ErrnoError||abort(f),-f.errno}}
function ___syscall54(a,b){SYSCALLS.varargs=b;try{var c=SYSCALLS.getStreamFromFD(),d=SYSCALLS.get();switch(d){case 21509:case 21505:return c.tty?0:-ERRNO_CODES.ENOTTY;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return c.tty?0:-ERRNO_CODES.ENOTTY;case 21519:if(!c.tty)return-ERRNO_CODES.ENOTTY;var e=SYSCALLS.get();return HEAP32[e>>2]=0;case 21520:return c.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:return e=SYSCALLS.get(),FS.ioctl(c,d,e);case 21523:return c.tty?0:-ERRNO_CODES.ENOTTY;
case 21524:return c.tty?0:-ERRNO_CODES.ENOTTY;default:abort("bad ioctl syscall "+d)}}catch(f){return"undefined"!==typeof FS&&f instanceof FS.ErrnoError||abort(f),-f.errno}}function ___syscall6(a,b){SYSCALLS.varargs=b;try{var c=SYSCALLS.getStreamFromFD();FS.close(c);return 0}catch(d){return"undefined"!==typeof FS&&d instanceof FS.ErrnoError||abort(d),-d.errno}}function ___unlock(){}function __exit(a){exit(a)}function _exit(a){__exit(a)}
function _emscripten_memcpy_big(a,b,c){HEAPU8.set(HEAPU8.subarray(b,b+c),a);return a}function _trap_copy_rect(a,b,c){a=new Uint8Array(Module.HEAPU8.buffer,a,b*c);for(var d=document.getElementById("canvas").getContext("2d"),e=d.getImageData(0,0,b,c),f=e.data,g=0;g<b*c;g+=1){var h=a[g];f[4*g]=this.palette[3*h];f[4*g+1]=this.palette[3*h+1];f[4*g+2]=this.palette[3*h+2];f[4*g+3]=255}d.putImageData(e,0,0)}
function _trap_event(a,b){1==a?ga("send","event","Game","play","game_complete",b):2==a?ga("send","event","Game","play","game_over",b):3==a&&ga("send","event","Game","play","game_start",b)}function _trap_fade_palette(){}function _trap_fn1_key_down(){var a=keyboard_f1_pressed;keyboard_f1_pressed=!1;return a}function _trap_left_key_down(){var a=keyboard_left_pressed;keyboard_left_pressed=!1;return a}function _trap_play_sample(a){}function _trap_play_sound(a){}
function _trap_right_key_down(){var a=keyboard_right_pressed;keyboard_right_pressed=!1;return a}function _trap_set_palette(a,b){this.palette=new Uint8Array(Module.HEAPU8.buffer,a,3*b)}FS.staticInit();__ATINIT__.unshift(function(){Module.noFSInit||FS.init.initialized||FS.init()});__ATMAIN__.push(function(){FS.ignorePermissions=!1});__ATEXIT__.push(function(){FS.quit()});__ATINIT__.unshift(function(){TTY.init()});__ATEXIT__.push(function(){TTY.shutdown()});
if(ENVIRONMENT_IS_NODE){var fs=require("fs"),NODEJS_PATH=require("path");NODEFS.staticInit()}DYNAMICTOP_PTR=staticAlloc(4);STACK_BASE=STACKTOP=alignMemory(STATICTOP);STACK_MAX=STACK_BASE+TOTAL_STACK;DYNAMIC_BASE=alignMemory(STACK_MAX);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;staticSealed=!0;function intArrayFromString(a,b,c){c=0<c?c:lengthBytesUTF8(a)+1;c=Array(c);a=stringToUTF8Array(a,c,0,c.length);b&&(c.length=a);return c}Module.wasmTableSize=10;Module.wasmMaxTableSize=10;Module.asmGlobalArg={};
Module.asmLibraryArg={abort:abort,enlargeMemory:enlargeMemory,getTotalMemory:getTotalMemory,abortOnCannotGrowMemory:abortOnCannotGrowMemory,___lock:___lock,___setErrNo:___setErrNo,___syscall140:___syscall140,___syscall145:___syscall145,___syscall146:___syscall146,___syscall221:___syscall221,___syscall5:___syscall5,___syscall54:___syscall54,___syscall6:___syscall6,___unlock:___unlock,_emscripten_memcpy_big:_emscripten_memcpy_big,_exit:_exit,_trap_copy_rect:_trap_copy_rect,_trap_event:_trap_event,_trap_fade_palette:_trap_fade_palette,
_trap_fn1_key_down:_trap_fn1_key_down,_trap_left_key_down:_trap_left_key_down,_trap_play_sample:_trap_play_sample,_trap_play_sound:_trap_play_sound,_trap_right_key_down:_trap_right_key_down,_trap_set_palette:_trap_set_palette,DYNAMICTOP_PTR:DYNAMICTOP_PTR,STACKTOP:STACKTOP};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;
var ___errno_location=Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},_malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)},_train_fini=Module._train_fini=function(){return Module.asm._train_fini.apply(null,arguments)},_train_init=Module._train_init=function(){return Module.asm._train_init.apply(null,arguments)},_train_update=Module._train_update=function(){return Module.asm._train_update.apply(null,arguments)};
Module.asm=asm;function ExitStatus(a){this.name="ExitStatus";this.message="Program terminated with exit("+a+")";this.status=a}ExitStatus.prototype=Error();ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function runCaller(){Module.calledRun||run();Module.calledRun||(dependenciesFulfilled=runCaller)};
function run(a){function b(){if(!Module.calledRun&&(Module.calledRun=!0,!ABORT)){ensureInitRuntime();preMain();if(Module.onRuntimeInitialized)Module.onRuntimeInitialized();postRun()}}0<runDependencies||(preRun(),0<runDependencies||Module.calledRun||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1);b()},1)):b()))}Module.run=run;
function exit(a,b){if(!b||!Module.noExitRuntime||0!==a){if(!Module.noExitRuntime&&(ABORT=!0,EXITSTATUS=a,STACKTOP=initialStackTop,exitRuntime(),Module.onExit))Module.onExit(a);Module.quit(a,new ExitStatus(a))}}function abort(a){if(Module.onAbort)Module.onAbort(a);void 0!==a?(out(a),err(a),a=JSON.stringify(a)):a="";ABORT=!0;EXITSTATUS=1;throw"abort("+a+"). Build with -s ASSERTIONS=1 for more info.";}Module.abort=abort;
if(Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);0<Module.preInit.length;)Module.preInit.pop()();Module.noExitRuntime=!0;run();
